- content_for :head do
  = render 'locomotive/sites/domains'

- content_for :backbone_view_data do
  :plain
    { site: #{@site.to_json}, errors: #{@site.errors.to_json} }

= f.inputs :name => :information, :style => "#{'display: none' unless @site.new_record?}" do
  = f.input :name, :required => false

= f.inputs :name => :seo, :class => "inputs foldable #{'folded' if inputs_folded?(@site)}" do
  = f.input :seo_title
  = f.input :meta_keywords
  = f.input :meta_description

- if can?(:point, Locomotive::Site)
  - if manage_subdomain_or_domains?
    = f.inputs :name => :access_points do
      = f.input :subdomain, :as => :'Locomotive::Subdomain', :domain => application_domain, :input_html => { :readonly => !manage_subdomain? }

      - if manage_domains?
        = f.input :domains, :as => :'Locomotive::Empty'

- if can?(:index, Locomotive::Membership)

  = f.inputs :name => :memberships do
    = f.semantic_fields_for :memberships do |fm|

      - membership, account = fm.object, fm.object.account

      %li.item.membership{ :'data-role' => membership.role }
        %strong= account.name

        %em.email= account.email

        - if can?(:update, membership)
          .role
            %em.editable= t("locomotive.memberships.roles.#{membership.role}")

            - if can?(:grant_admin, membership)
              = fm.select :role, Locomotive::Ability::ROLES.map { |r| [t("locomotive.memberships.roles.#{r}"), r] }, :include_blank => false
            - else
              = fm.select :role, (Locomotive::Ability::ROLES - ['admin']).map { |r| [t("locomotive.memberships.roles.#{r}"), r] }, :include_blank => false

          %span.actions
            = link_to image_tag('admin/form/icons/trash.png'), membership_url(membership), :class => 'remove first', :confirm =>t('locomotive.messages.confirm'), :method => :delete

        - else
          .role
            %em.locked= t("locomotive.memberships.roles.#{membership.role}")

- if can?(:manage, current_site)

  = f.inputs :name => :robots_txt, :class => "inputs foldable #{'folded' if inputs_folded?(@site)}" do
    = f.input :robots_txt, :as => :'Locomotive::Code', :picker => false, :wrapper_html => { :class => 'small' }
